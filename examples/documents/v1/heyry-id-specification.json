{
  "$schema": "https://schema.heyry.tools/documents/specification/v1/specification.schema.json",
  "header": {
    "title": "HEYRY ID Specification",
    "description": "The HEYRY ID is a standardized, unique identifier designed for use across all aspects of a business.",
    "created_date": "2024-12-18",
    "last_updated_date": "2025-10-03",
    "tags": [
      "identifier",
      "specification",
      "compliance"
    ],
    "links": [
      {
        "label": "Source Markdown",
        "url": "https://schema.heyry.tools/docs/heyry-id"
      },
      {
        "label": "Generation Guidelines",
        "url": "https://schema.heyry.tools/docs/heyry-id/generation"
      }
    ],
    "heyry_id": "RRR0-A4NK-L7WV-95",
    "version": "1.0.5",
    "author": "Ryan Moen",
    "priority": "P1",
    "status": "implemented"
  },
  "body": {
    "problem_statement": "The HEYRY ID is a standardized, unique identifier designed for use across all aspects of a business. It serves as a unified reference for diverse entities, including but not limited to:\n- Products\n- Assemblies\n- Serial numbers\n- Batches or lots of parts\n- Manufacturing bins\n- Employees\n- Customers\n- Orders",
    "context": "The HEYRY ID provides high uniqueness and error-detection capabilities. It minimizes the risk of collisions through random generation and SHA-256-based check digits, making it suitable for large-scale systems. The HEYRY ID should be generated and validated programmatically to ensure uniqueness and compliance. Check digits (CC) are derived from the SHA-256 hash of the 12-character portion, excluding hyphens, ensuring consistency across implementations. The 14-character format balances compactness and information capacity, making it ideal for systems requiring brevity and uniqueness while remaining compatible with databases and external systems. The HEYRY ID format allows for a vast number of unique combinations. With 32 valid characters (A-H, J-N, P, R-Z, 0-9) and 12 positions for the main identifier (X), there are 32^12 ≈ 1.15 × 10^18 possible unique combinations. The two-character check digit (CC) further protects against invalid IDs. Using SHA-256 ensures the likelihood of a collision is negligible. In the rare event of a collision, the system should detect it and generate a new unique ID, ensuring system integrity. SHA-256 ensures resistance to tampering and preserves data integrity. While the check digits are primarily for integrity checks, they are not cryptographically secure. Additional encryption can be applied if necessary for sensitive systems.",
    "goals": [
      "The HEYRY ID provides high uniqueness and error-detection capabilities.",
      "It minimizes the risk of collisions through random generation and SHA-256-based check digits, making it suitable for large-scale systems.",
      "The 14-character format balances compactness and information capacity, making it ideal for systems requiring brevity and uniqueness while remaining compatible with databases and external systems."
    ],
    "scope": {
      "in_scope": [
        "Products",
        "Assemblies",
        "Serial numbers",
        "Batches or lots of parts",
        "Manufacturing bins",
        "Employees",
        "Customers",
        "Orders"
      ]
    },
    "requirements": [
      {
        "id": "REQ-HEYRY-001",
        "statement": "The HEYRY ID consists of 14 characters arranged as follows: XXXX-XXXX-XXXX-CC.",
        "type": "functional",
        "priority": "P1",
        "status": "implemented"
      },
      {
        "id": "REQ-HEYRY-002",
        "statement": "X represents uppercase alphanumeric characters excluding I, O, and Q to avoid confusion. Valid characters include digits 0-9 and uppercase letters A-H, J-N, P, R-Z.",
        "type": "functional",
        "priority": "P1",
        "status": "implemented"
      },
      {
        "id": "REQ-HEYRY-003",
        "statement": "CC represents the first two characters of the SHA-256 hash of the preceding 12 characters (XXXX-XXXX-XXXX), used as check digits for data integrity.",
        "type": "functional",
        "priority": "P1",
        "status": "implemented"
      },
      {
        "id": "REQ-HEYRY-004",
        "statement": "To validate the HEYRY ID format, use the regular expression ^[A-HJ-NPR-Z0-9]{4}-[A-HJ-NPR-Z0-9]{4}-[A-HJ-NPR-Z0-9]{4}-[A-F0-9]{2}$.",
        "type": "functional",
        "priority": "P1",
        "status": "implemented",
        "acceptance_criteria": [
          "^[A-HJ-NPR-Z0-9]{4} matches the first block of 4 characters.",
          "-[A-HJ-NPR-Z0-9]{4} matches the second block after a hyphen.",
          "-[A-HJ-NPR-Z0-9]{4} matches the third block after another hyphen.",
          "-[A-F0-9]{2}$ matches the final 2-character block consisting of hexadecimal values, with ^ and $ asserting the start and end of the string."
        ]
      },
      {
        "id": "REQ-HEYRY-005",
        "statement": "The HEYRY ID should be generated and validated programmatically to ensure uniqueness and compliance. Check digits (CC) are derived from the SHA-256 hash of the 12-character portion, excluding hyphens, ensuring consistency across implementations.",
        "type": "functional",
        "priority": "P1",
        "status": "implemented"
      },
      {
        "id": "REQ-HEYRY-006",
        "statement": "In the rare event of a collision, the system should detect it and generate a new unique ID, ensuring system integrity.",
        "type": "functional",
        "priority": "P1",
        "status": "implemented"
      },
      {
        "id": "REQ-HEYRY-007",
        "statement": "To ensure clarity and avoid ambiguity when displaying the HEYRY ID, use Arial, Courier New, Verdana, or Calibri.",
        "type": "ux",
        "priority": "P2",
        "status": "implemented",
        "acceptance_criteria": [
          "Arial is a widely available sans serif font, simple and highly readable.",
          "Courier New is a traditional monospace font with unambiguous character design.",
          "Verdana is a sans serif font optimized for screen readability.",
          "Calibri is a modern sans serif font, default in many Microsoft Office applications."
        ]
      }
    ],
    "design_overview": "The HEYRY ID consists of 14 characters arranged as follows:\n\nXXXX-XXXX-XXXX-CC\n\n1. X: Represents uppercase alphanumeric characters excluding I, O, and Q to avoid confusion. Valid characters include digits 0-9 and uppercase letters A-H, J-N, P, R-Z.\n2. CC: Represents the first two characters of the SHA-256 hash of the preceding 12 characters (XXXX-XXXX-XXXX), used as check digits for data integrity.",
    "validation_plan": [
      "To validate the HEYRY ID format, use the regular expression ^[A-HJ-NPR-Z0-9]{4}-[A-HJ-NPR-Z0-9]{4}-[A-HJ-NPR-Z0-9]{4}-[A-F0-9]{2}$.",
      "ABCD-EFGH-IJKL-12 → Valid — Correct format and check digits.",
      "AB12-CD34-EF56-78 → Invalid — Last two characters do not match hash.",
      "ABCD-EFGH-IJKL → Invalid — Missing check digits (CC).",
      "ABCD-EFGH-IJKL-MNOP → Invalid — Extra characters after CC.",
      "AB1D-EF2H-IJ3L-45 → Valid — Properly formatted and valid check digits.",
      "ABCD-EFGH-1234-AB → Invalid — Includes restricted characters (I).",
      "These test cases validate HEYRY ID implementation and logic."
    ],
    "examples": [
      {
        "title": "Example HEYRY ID",
        "code": "ABCD-1234-EFGH-AB"
      },
      {
        "title": "Python Generation Example",
        "code": "import random\nimport hashlib\n\nCHARACTERS = \"ABCDEFGHJKLMNPRSTUVWXYZ0123456789\"\n\ndef generate_heyry_id():\n    random_part = \"\".join(random.choices(CHARACTERS, k=12))\n    hash_part = hashlib.sha256(random_part.encode()).hexdigest()[:2].upper()\n    return f\"{random_part[:4]}-{random_part[4:8]}-{random_part[8:12]}-{hash_part}\""
      },
      {
        "title": "C++ Generation Example",
        "code": "#include <Arduino.h>\n#include <SHA256.h>\n\nString generateHeyryID() {\n    const char characters[] = \"ABCDEFGHJKLMNPRSTUVWXYZ0123456789\";\n    char randomPart[13];\n    for (int i = 0; i < 12; i++) {\n        randomPart[i] = characters[random(0, sizeof(characters) - 1)];\n    }\n    randomPart[12] = '\\0';\n\n    SHA256 sha256;\n    sha256.update((uint8_t *)randomPart, strlen(randomPart));\n    char hash[65];\n    sha256.finalize(hash, sizeof(hash));\n\n    String checkDigits = String(hash).substring(0, 2).toUpperCase();\n    return String(randomPart).substring(0, 4) + \"-\" +\n           String(randomPart).substring(4, 8) + \"-\" +\n           String(randomPart).substring(8, 12) + \"-\" + checkDigits;\n}"
      },
      {
        "title": "PowerShell Generation Example",
        "code": "function Generate-HeyryID {\n    $characters = \"ABCDEFGHJKLMNPRSTUVWXYZ0123456789\"\n    $randomPart = -join ((1..12) | ForEach-Object { $characters[(Get-Random -Maximum $characters.Length)] })\n    $hashPart = [BitConverter]::ToString((New-Object Security.Cryptography.SHA256Managed).ComputeHash([System.Text.Encoding]::UTF8.GetBytes($randomPart))).Substring(0,2).ToUpper()\n    return \"{0}-{1}-{2}-{3}\" -f $randomPart.Substring(0,4), $randomPart.Substring(4,4), $randomPart.Substring(8,4), $hashPart\n}"
      },
      {
        "title": "AutoHotkey Generation Example",
        "code": "GenerateHeyryID() {\n    characters := \"ABCDEFGHJKLMNPRSTUVWXYZ0123456789\"\n    randomPart := \"\"\n    Loop, 12 {\n        randomPart .= SubStr(characters, Random(1, StrLen(characters)), 1)\n    }\n    ; Calculate hash using PowerShell\n    psCommand := \"[string]::Join('',(Get-FileHash -Algorithm SHA256 -InputObject \\\"\" . randomPart . \"\\\" | ForEach-Object Hash).Substring(0,2)).ToUpper()\"\n    RunWait, %ComSpec% /c powershell -Command \"%psCommand%\", , OutputVar\n    calculatedHash := StrTrimLeft(OutputVar, StrLen(\"PS>\")) ; Remove PS prompt\n    Return SubStr(randomPart, 1, 4) . \"-\" . SubStr(randomPart, 5, 4) . \"-\" . SubStr(randomPart, 9, 4) . \"-\" . calculatedHash\n}\nRandom(min, max) {\n    Random, r, min, max\n    return r\n}"
      },
      {
        "title": "Python Validation Example",
        "code": "import re\nimport hashlib\n\nHEYRY_ID_REGEX = r'^[A-HJ-NPR-Z0-9]{4}-[A-HJ-NPR-Z0-9]{4}-[A-HJ-NPR-Z0-9]{4}-[A-F0-9]{2}$'\n\ndef validate_heyry_id(heyry_id):\n    if not re.match(HEYRY_ID_REGEX, heyry_id):\n        return False\n\n    parts = heyry_id.split('-')\n    data_part = \"\".join(parts[:-1])\n    hash_part = parts[-1]\n    calculated_hash = hashlib.sha256(data_part.encode()).hexdigest()[:2].upper()\n    return calculated_hash == hash_part"
      },
      {
        "title": "C++ Validation Example",
        "code": "#include <regex>\n#include <SHA256.h>\n\nbool validateHeyryID(const String& heyryID) {\n    std::regex pattern(\"^[A-HJ-NPR-Z0-9]{4}-[A-HJ-NPR-Z0-9]{4}-[A-HJ-NPR-Z0-9]{4}-[A-F0-9]{2}$\");\n    if (!std::regex_match(heyryID.c_str(), pattern)) {\n        return false;\n    }\n\n    String dataPart = heyryID.substring(0, 14).replace(\"-\", \"\");\n    String hashPart = heyryID.substring(15, 17);\n\n    SHA256 sha256;\n    sha256.update((uint8_t *)dataPart.c_str(), dataPart.length());\n    char hash[65];\n    sha256.finalize(hash, sizeof(hash));\n    String calculatedHash = String(hash).substring(0, 2).toUpperCase();\n\n    return calculatedHash == hashPart;\n}"
      },
      {
        "title": "PowerShell Validation Example",
        "code": "function Validate-HeyryID {\n    param ([string]$HeyryID)\n\n    $pattern = '^[A-HJ-NPR-Z0-9]{4}-[A-HJ-NPR-Z0-9]{4}-[A-HJ-NPR-Z0-9]{4}-[A-F0-9]{2}$'\n    if (-not ($HeyryID -match $pattern)) {\n        return $false\n    }\n\n    $parts = $HeyryID -split '-'\n    $dataPart = $parts[0..2] -join ''\n    $hashPart = $parts[3]\n\n    $sha256 = [System.Security.Cryptography.SHA256]::Create()\n    $calculatedHash = [BitConverter]::ToString($sha256.ComputeHash([System.Text.Encoding]::UTF8.GetBytes($dataPart))).Substring(0,2).ToUpper()\n\n    return $calculatedHash -eq $hashPart\n}"
      },
      {
        "title": "AutoHotkey Validation Example",
        "code": "validateHeyryID(heyryID) {\n    if !RegExMatch(heyryID, \"^[A-HJ-NPR-Z0-9]{4}-[A-HJ-NPR-Z0-9]{4}-[A-HJ-NPR-Z0-9]{4}-[A-F0-9]{2}$\")\n        return false\n\n    parts := StrSplit(heyryID, \"-\")\n    dataPart := parts[1] . parts[2] . parts[3]\n    hashPart := parts[4]\n\n    ; Use PowerShell to calculate the SHA-256 hash\n    psCommand := \"[string]::Join('',(Get-FileHash -Algorithm SHA256 -InputObject \\\"\" . dataPart . \"\\\" | ForEach-Object Hash).Substring(0,2)).ToUpper()\"\n    RunWait, %ComSpec% /c powershell -Command \"%psCommand%\", , OutputVar\n    calculatedHash := StrTrimLeft(OutputVar, StrLen(\"PS>\")) ; Remove PS prompt\n    return (calculatedHash == hashPart)\n}"
      }
    ]
  },
  "footer": {
    "revision_history": {
      "revisions": [
        {
          "date": "2024-12-18",
          "version": "1.0.0",
          "updated_by": "Ryan Moen",
          "summary_of_change": "Initial Version (recorded as v1.0)."
        },
        {
          "date": "2025-08-09",
          "version": "1.0.0",
          "updated_by": "Codex",
          "summary_of_change": "Documented process for generating HEYRY IDs (recorded as v1.0)."
        },
        {
          "date": "2025-08-23",
          "version": "1.0.1",
          "updated_by": "ChatGPT",
          "summary_of_change": "Added priority/status metadata and updated last_updated_date."
        },
        {
          "date": "2025-08-30",
          "version": "1.0.2",
          "updated_by": "ChatGPT",
          "summary_of_change": "Clarified documentation practices for HEYRY IDs."
        },
        {
          "date": "2025-09-01",
          "version": "1.0.3",
          "updated_by": "ChatGPT",
          "summary_of_change": "Noted placeholder string for documenting HEYRY IDs."
        },
        {
          "date": "2025-10-02",
          "version": "1.0.4",
          "updated_by": "ChatGPT",
          "summary_of_change": "Introduced requirement identifiers to comply with the standardized requirement format."
        },
        {
          "date": "2025-10-03",
          "version": "1.0.5",
          "updated_by": "ChatGPT",
          "summary_of_change": "Imported the HEYRY ID markdown content from _docs/HEYRY ID.md without embellishment and aligned the specification body with the source material."
        }
      ]
    }
  }
}
